<div id="giscus_thread" style="max-width: {{ site.comments.max_width }}; margin: 0 auto;">
  {% if site.comments.giscus.repo %}
    <script>
      let giscusTheme = determineComputedTheme();
      let giscusAttributes = {
        src: 'https://giscus.app/client.js',
        'data-repo': '{{ site.comments.giscus.repo }}',
        'data-repo-id': '{{ site.comments.giscus.repo_id }}',
        'data-category': '{{ site.comments.giscus.category }}',
        'data-category-id': '{{ site.comments.giscus.category_id }}',
        'data-mapping': '{{ site.comments.giscus.mapping }}',
        'data-strict': '{{ site.comments.giscus.strict }}',
        'data-reactions-enabled': '{{ site.comments.giscus.reactions_enabled }}',
        'data-emit-metadata': '{{ site.comments.giscus.emit_metadata }}',
        'data-input-position': '{{ site.comments.giscus.input_position }}',
        'data-theme': giscusTheme,
        'data-lang': '{{ site.comments.giscus.lang }}',
        crossorigin: 'anonymous',
        async: '',
      };

      let giscusScript = document.createElement('script');
      Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value));
      document.getElementById('giscus_thread').appendChild(giscusScript);
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript">comments powered by giscus.</a></noscript>
  {% else %}
    {% capture giscus_warning %} > ##### giscus comments misconfigured > Please follow instructions at
  [http://giscus.app](http://giscus.app) and update your giscus configuration. {: .block-danger } {% endcapture %}
    {{ giscus_warning | markdownify }}
  {% endif %}
</div>
